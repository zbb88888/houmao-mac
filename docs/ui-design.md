## Houmao Mac 客户端 UI 设计（MVP）

本文件描述当前阶段 Houmao Mac 客户端的最小可用 UI 设计，用于后续开发实现和评审。

---

## 1. 主窗口（输入 + LLM 回复）

### 1.1 功能目标

- **输入框**：用户直接与 LLM 交互的入口。
- **LLM 回复展示区域**：显示本次提问的回复内容。
- **特殊命令 `history`**：在输入框中输入 `history` 后，不调用 LLM，而是唤起历史“使用情况”记录窗口。

### 1.2 布局结构

- **整体**
  - 窗口尺寸：约 520 × 360。
  - 布局：垂直方向自上而下。

- **顶部区域：输入行**
  - 单行输入框（TextField 样式）。
  - 占据窗口宽度的大部分，圆角、浅色边框。
  - Placeholder 文案：`Ask LLM... 或输入 history 查看使用记录`
  - 右侧可以有一个小的 `Send` 按钮，但主要操作是按回车发送。

- **中下区域：LLM 回复展示**
  - 一个垂直滚动区域（ScrollView）。
  - 显示当前这一轮对话：
    - 行 1：`You: <用户最近一次提问>`
    - 行 2：`LLM: <LLM 的回复内容>`
  - 回复内容支持基础的多行文本展示（可以考虑后续支持 Markdown）。

- **状态反馈**
  - 当正在等待 LLM 回复时，在回复区域顶部或底部显示一行小字，例如：`Thinking...` 或加载指示器。

### 1.3 交互行为

- **打开主窗口**
  - 通过快捷键（例如 `Ctrl + 空格`）或点击 Dock 图标打开。
  - 打开时，输入框自动获得焦点。

- **发送普通问题**
  - 用户在输入框中输入任意非空文本（不为 `history`），按回车或点击 `Send`：
    - 清空输入框。
    - 在回复区域显示 `You: <问题>`。
    - 调用 LLM，等待回复。
    - 收到回复后，在回复区域显示 `LLM: <回复>`。

- **触发历史记录窗口**
  - 用户在输入框中输入 `history`（忽略前后空格，大小写不敏感），按回车：
    - 不调用 LLM。
    - 清空输入框。
    - 唤起独立的历史“使用情况”记录窗口。

- **窗口关闭**
  - 通过常规 macOS 关闭方式（标题栏关闭按钮、Cmd+W 或切换到其他 App）关闭。
  - 再次通过快捷键可以重新打开。

---

## 2. 历史“使用情况”记录窗口（History）

### 2.1 功能目标

- 展示已采集的 PC 使用情况记录（例如：时间、前台应用、输入片段）。
- 提供一个按钮，一键清理所有历史记录。
- 仅在用户输入 `history` 命令时弹出，不常驻。

### 2.2 打开方式

- 在主窗口输入框中输入 `history` 并回车后：
  - 打开一个新的 History 窗口。
  - 如果窗口已存在但被隐藏，则将其前置到可见位置。

### 2.3 布局结构

- **窗口标题**
  - 标题栏显示：`Usage History`。

- **内容区域**
  - 顶部：可选的说明文字，例如：`以下为本机采集的使用情况记录，仅保存在本地。`
  - 中间：垂直列表（ScrollView / List），按时间倒序展示记录：
    - 每条记录包含：
      - 时间戳（简短格式，如 `2026-02-20 10:01`）。
      - 前台应用名称（例如：`Xcode`）。
      - 文本输入片段（例如前若干个字符，过长时使用省略号）。
  - 底部：右下角放置一个按钮。

- **底部操作区**
  - 按钮文案：`Clear All History`。
  - 点击后：
    - 弹出二次确认（可选，后续迭代），当前 MVP 可以直接清空。
    - 清除本地所有历史“使用情况”记录。
    - 列表立即刷新为空。

### 2.4 交互行为

- **关闭窗口**
  - 标准 macOS 关闭行为（标题栏关闭按钮、Cmd+W）。
  - 关闭仅影响历史窗口，不影响主窗口。

- **再次打开**
  - 再次在主窗口中输入 `history` 并回车时，如果历史窗口已被关闭或隐藏，将重新显示。

---

## 3. 行为总结与约定

- **主窗口只负责两件事**
  - 承担与 LLM 的一次性问答交互（input → reply）。
  - 接受特殊命令 `history` 来打开历史记录窗口。

- **历史窗口只负责查看与清空记录**
  - 不直接与 LLM 交互。
  - 提供清理本地使用情况记录的统一入口。

- **快捷键（可调整）**
  - 当前设计为通过全局快捷键唤醒主窗口，建议默认 `Ctrl + 空格`（实际实现时可根据系统设置冲突进行调整）。

本设计作为当前阶段的基线文档，后续如有 UI 调整或增加新功能，应在本文件中更新，以保证实现与设计一致。

