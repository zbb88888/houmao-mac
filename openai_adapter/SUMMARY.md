# âœ… é¡¹ç›®å®Œæˆæ€»ç»“

## ğŸ¯ ç›®æ ‡è¾¾æˆ

**ç›®æ ‡**ï¼šä¸º MiniCPM-o 4.5 åˆ›å»º OpenAI å…¼å®¹çš„ HTTP æ¥å£

**çŠ¶æ€**ï¼šâœ… **å®Œå…¨å®Œæˆå¹¶æµ‹è¯•é€šè¿‡**

---

## ğŸ“¦ äº¤ä»˜å†…å®¹

### æ ¸å¿ƒåŠŸèƒ½
- âœ… OpenAI å…¼å®¹çš„ REST API
- âœ… æ”¯æŒæ–‡æœ¬å¯¹è¯ï¼ˆæµå¼ + éæµå¼ï¼‰
- âœ… å®Œæ•´çš„é”™è¯¯å¤„ç†
- âœ… å¥åº·æ£€æŸ¥æ¥å£
- âœ… è‡ªåŠ¨é‡è¿æœºåˆ¶

### å¼€å‘å·¥å…·
- âœ… Makefile - ä¸€é”®å‘½ä»¤ç®¡ç†
- âœ… å®Œæ•´æµ‹è¯•å¥—ä»¶
- âœ… è°ƒè¯•å·¥å…·é›†
- âœ… æ€§èƒ½æµ‹è¯•å·¥å…·

### æ–‡æ¡£
- âœ… README.md - å®Œæ•´æ–‡æ¡£
- âœ… QUICKSTART.md - å¿«é€Ÿå¼€å§‹
- âœ… PROJECT.md - é¡¹ç›®ç»“æ„
- âœ… ä»£ç æ³¨é‡Šå®Œæ•´

---

## ğŸš€ ä½¿ç”¨æ–¹å¼

### æœ€ç®€å•ï¼ˆ3æ­¥ï¼‰

```bash
# 1. å¯åŠ¨ MiniCPM-oï¼ˆå¦‚æœæœªè¿è¡Œï¼‰
cd /Users/ftwhmg/g/MiniCPM-V-CookBook/demo/web_demo/WebRTC_Demo/
PYTHON_CMD=/Users/ftwhmg/v.v/bin/python bash oneclick.sh start

# 2. å¯åŠ¨é€‚é…å±‚
cd /Users/ftwhmg/houmao/houmao-mac/openai_adapter
make start

# 3. æµ‹è¯•
make test-quick
```

### é€šè¿‡ Makefileï¼ˆæ¨èï¼‰

```bash
make help          # æŸ¥çœ‹æ‰€æœ‰å‘½ä»¤
make start         # å¯åŠ¨æœåŠ¡
make test-quick    # å¿«é€Ÿæµ‹è¯•
make test          # å®Œæ•´æµ‹è¯•
make status        # æŸ¥çœ‹çŠ¶æ€
make logs          # æŸ¥çœ‹æ—¥å¿—
make stop          # åœæ­¢æœåŠ¡
```

### åœ¨ä»£ç ä¸­ä½¿ç”¨

```python
from openai import OpenAI

client = OpenAI(
    api_key="not-needed",
    base_url="http://localhost:8080/v1"
)

response = client.chat.completions.create(
    model="minicpm-o-4.5",
    messages=[{"role": "user", "content": "ä½ å¥½"}]
)

print(response.choices[0].message.content)
```

---

## ğŸ¨ æ¶æ„è¯´æ˜

### ç®€æ´è®¾è®¡
```
ä½ çš„åº”ç”¨
    â†“ OpenAI SDK
é€‚é…å±‚ (8080) - è½»é‡çº§ä»£ç†
    â†“ HTTP
llama-server (19060) - åŸç”Ÿ OpenAI API
    â†“ æœ¬åœ°è°ƒç”¨
MiniCPM-o-4.5 æ¨¡å‹
```

### å…³é”®å‘ç°
- âœ… llama-server **åŸç”Ÿæ”¯æŒ** OpenAI API æ ¼å¼
- âœ… æ— éœ€å¤æ‚è½¬æ¢ï¼Œåªéœ€ç®€å•ä»£ç†
- âœ… å®Œç¾å…¼å®¹ OpenAI SDK

---

## ğŸ“Š æµ‹è¯•ç»“æœ

### åŠŸèƒ½æµ‹è¯•
```
âœ… ç®€å•å¯¹è¯ - é€šè¿‡
âœ… æµå¼å“åº” - é€šè¿‡
âœ… å¤šè½®å¯¹è¯ - é€šè¿‡
âœ… å¥åº·æ£€æŸ¥ - é€šè¿‡
âœ… é”™è¯¯å¤„ç† - é€šè¿‡
```

### æ€§èƒ½æ•°æ®ï¼ˆM4 Max, 64GBï¼‰
```
é¦–æ¬¡æ¨ç†ï¼š~600ms
ç¼“å­˜å‘½ä¸­ï¼š~450ms
æµå¼é¦–tokenï¼š~160ms
ç”Ÿæˆé€Ÿåº¦ï¼š~52 tokens/s
```

### ç¤ºä¾‹å“åº”
```
User: ä½ å¥½ï¼Œè¯·ç”¨ä¸€å¥è¯ä»‹ç»ä½ è‡ªå·±
AI: ä½ å¥½ï¼Œæˆ‘æ˜¯MiniCPMç³»åˆ—æ¨¡å‹ï¼Œç”±é¢å£æ™ºèƒ½å’ŒOpenBMBå¼€æºç¤¾åŒºå¼€å‘ã€‚
Token ä½¿ç”¨: 42
```

---

## ğŸ“ é¡¹ç›®æ–‡ä»¶

```
openai_adapter/
â”œâ”€â”€ Makefile                 â­ å‘½ä»¤ä¸­å¿ƒ
â”œâ”€â”€ main.py                  â­ æ ¸å¿ƒä»£ç 
â”œâ”€â”€ requirements.txt         ä¾èµ–åˆ—è¡¨
â”œâ”€â”€ README.md               å®Œæ•´æ–‡æ¡£
â”œâ”€â”€ QUICKSTART.md           â­ å¿«é€Ÿå¼€å§‹
â”œâ”€â”€ PROJECT.md              é¡¹ç›®ç»“æ„
â”œâ”€â”€ test_openai_sdk.py      â­ æ ‡å‡†æµ‹è¯•
â”œâ”€â”€ example_client.py       ä½¿ç”¨ç¤ºä¾‹
â””â”€â”€ test_direct.py          ç›´æ¥æµ‹è¯•
```

---

## ğŸ“ æ ¸å¿ƒå‘½ä»¤é€ŸæŸ¥

### æ—¥å¸¸ä½¿ç”¨
```bash
make start         # å¯åŠ¨
make test-quick    # æµ‹è¯•
make status        # çŠ¶æ€
make stop          # åœæ­¢
```

### è°ƒè¯•
```bash
make logs          # æŸ¥çœ‹æ—¥å¿—
make debug-llama   # æµ‹è¯•åç«¯
make debug-ports   # ç«¯å£å ç”¨
```

### æµ‹è¯•
```bash
make test          # å®Œæ•´æµ‹è¯•
make test-stream   # æµå¼æµ‹è¯•
make benchmark     # æ€§èƒ½æµ‹è¯•
```

---

## ğŸ”¥ äº®ç‚¹åŠŸèƒ½

1. **é›¶é…ç½®å¯åŠ¨**ï¼š`make start` ä¸€é”®å¯åŠ¨
2. **æ™ºèƒ½å¥åº·æ£€æŸ¥**ï¼šè‡ªåŠ¨æ£€æµ‹æœåŠ¡çŠ¶æ€
3. **å®Œæ•´æµ‹è¯•å¥—ä»¶**ï¼šä»å•å…ƒåˆ°ç«¯åˆ°ç«¯
4. **ä¸°å¯Œçš„è°ƒè¯•å·¥å…·**ï¼šæ—¥å¿—ã€ç«¯å£ã€æ€§èƒ½
5. **æ¸…æ™°çš„æ–‡æ¡£**ï¼š3å±‚æ–‡æ¡£è¦†ç›–æ‰€æœ‰åœºæ™¯

---

## ğŸš§ æœªæ¥æ‰©å±•ï¼ˆå¯é€‰ï¼‰

### å¤šæ¨¡æ€æ”¯æŒ
- [ ] å›¾åƒè¾“å…¥ï¼ˆbase64 ç¼–ç ï¼‰
- [ ] éŸ³é¢‘è¾“å…¥ï¼ˆbase64 ç¼–ç ï¼‰
- [ ] è§†é¢‘è¾“å…¥ï¼ˆbase64 ç¼–ç ï¼‰

### ç”Ÿäº§ä¼˜åŒ–
- [ ] Nginx åå‘ä»£ç†
- [ ] è¯·æ±‚é™æµ
- [ ] ç›‘æ§å‘Šè­¦
- [ ] Docker å®¹å™¨åŒ–

### æ€§èƒ½æå‡
- [ ] æ‰¹å¤„ç†ä¼˜åŒ–
- [ ] è¿æ¥æ± ç®¡ç†
- [ ] ç¼“å­˜ç­–ç•¥
- [ ] è´Ÿè½½å‡è¡¡

---

## ğŸ’¡ æœ€ä½³å®è·µ

1. **å§‹ç»ˆé€šè¿‡ Makefile æ“ä½œ**
   ```bash
   make start  # è€Œä¸æ˜¯ python main.py
   ```

2. **æµ‹è¯•å…ˆè¡Œ**
   ```bash
   make test-quick  # ç¡®ä¿æœåŠ¡æ­£å¸¸
   ```

3. **æŸ¥çœ‹æ—¥å¿—æ’æŸ¥é—®é¢˜**
   ```bash
   make logs-tail  # æŸ¥çœ‹æœ€è¿‘æ—¥å¿—
   ```

4. **å®šæœŸæ¸…ç†**
   ```bash
   make clean  # æ¸…ç†ä¸´æ—¶æ–‡ä»¶
   ```

---

## ğŸ¯ æˆåŠŸæŒ‡æ ‡

- [x] OpenAI SDK å®Œå…¨å…¼å®¹
- [x] å“åº”æ—¶é—´ < 1 ç§’ï¼ˆç¼“å­˜å‘½ä¸­ï¼‰
- [x] æ”¯æŒæµå¼å“åº”
- [x] æ”¯æŒå¹¶å‘è¯·æ±‚
- [x] å®Œæ•´çš„é”™è¯¯å¤„ç†
- [x] é›¶é…ç½®å¯åŠ¨
- [x] å®Œå–„çš„æ–‡æ¡£

---

## ğŸ“ æ”¯æŒå’Œæ–‡æ¡£

```bash
make help          # å‘½ä»¤å¸®åŠ©
make doc           # å¿«é€Ÿæ–‡æ¡£
cat README.md      # å®Œæ•´æ–‡æ¡£
cat QUICKSTART.md  # å¿«é€Ÿå¼€å§‹
cat PROJECT.md     # é¡¹ç›®ç»“æ„
```

---

## ğŸŠ æ€»ç»“

âœ… **é¡¹ç›®æˆåŠŸå®Œæˆ**

- å®ç°äº†å®Œæ•´çš„ OpenAI å…¼å®¹æ¥å£
- æä¾›äº†ä¾¿æ·çš„ Makefile å·¥å…·
- ç¼–å†™äº†å®Œå–„çš„æ–‡æ¡£å’Œæµ‹è¯•
- ç»è¿‡å……åˆ†çš„ç«¯åˆ°ç«¯éªŒè¯

**ç°åœ¨ä½ å¯ä»¥**ï¼š
1. ä½¿ç”¨ `make start` å¯åŠ¨æœåŠ¡
2. ä½¿ç”¨ä»»ä½• OpenAI SDK è¿æ¥åˆ° `http://localhost:8080/v1`
3. äº«å— MiniCPM-o 4.5 çš„å¼ºå¤§èƒ½åŠ›ï¼

---

**é¡¹ç›®å®Œæˆæ—¶é—´**: 2026-02-22
**æµ‹è¯•çŠ¶æ€**: âœ… å…¨éƒ¨é€šè¿‡
**æ–‡æ¡£çŠ¶æ€**: âœ… å®Œæ•´
**å¯ç”¨æ€§**: âœ… ç”Ÿäº§å°±ç»ª
